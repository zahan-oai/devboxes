# Example configuration for Applied Devboxes.
#
# Use this as a basic and customize as desired. Place the configuration at:
# ~/.config/applied-devbox/config.toml (on your laptop).

### Custom setup ###
#
# Specifies a custom_setup_script. It will be executed after clone and
# monorepo_bootstrap. The script will be executed as the devbox user in $HOME.
# Must be a local path that is:
#  * Executable (and includes appropriate #!)
#  * Smaller than 20Kb

# custom_setup_script  = "~/code/my-devbox-setup.sh"


### Package installation ###

# Will be installed with `apt install -y packages...` at pod start.
[apt]
install = [
    "gh",
    "golang-go",
]

### Port Forwarding ###
# A mapping between local -> remote ports. These are the ports that will be opened during `applied devbox up`.
# Example in the config.toml:
# [port_mapping]
# "10350" = "10350"
# "8070" = "8070"

### Additional Git repo cloning ###
#
# The monorepo is cloned automatically during bootstrap. If you want additional repos, such as for dotfiles or tools
# add `git.clone` sections (one per repo).
#
# repo: Required. Can also be an HTTPS URL.
# target_dest: Required. destination directory relative to ~/ on the Devbox.
# identity_file: Optional. For non-openai repos, specify an SSH identity to use,
#     relative to ~/ on the Devbox. Your local machine's Secretive public keys
#     will be copied to .ssh/secretive/ on the Devbox. See go/secretive-non-oai.
# install_command: Optional. Path (relative to target_dest) to a script to
#     execute after all repos have been cloned, relative to
# target_dest. E.g., this script might do things like
#     `cp ~/code/dotfiles/.vimrc ~/.vimrc`.
# refspec: Optional. If set, only fetches refs matching this refspec (see git-fetch docs).
#     Can be a string or a list of strings. Example: "+refs/heads/dev*:refs/remotes/origin/dev*"
#

[[git.clone]]
repo = "https://github.com/zahan-oai/devboxes.git"
target_dest = "code/devboxes"
install_command = "setup.sh"

[[secrets]]
name = "openai_api_key"
type = "env_var"
env_var_name = "OPENAI_API_KEY"
docstring = "Go to https://platform.openai.com/api-keys to get the key"
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "openai_api_key"},
    {kind = "env", name = "OPENAI_API_KEY"},
]

[[secrets]]
name = "openai_api_key_staging"
type = "env_var"
env_var_name = "OPENAI_API_KEY_STAGING"
docstring = "Go to http://platform.api.openai.org/api-keys to get the key for staging."
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "openai_api_key_staging"},
    {kind = "env", name = "OPENAI_API_KEY_STAGING"},
]

[[secrets]]
name = "statsig_api_key"
type = "env_var"
env_var_name = "STATSIG_API_KEY"
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "statsig_api_key"},
    {kind = "env", name = "STATSIG_API_KEY"},
]

[[secrets]]
name = "statsig_api_key_staging"
type = "env_var"
env_var_name = "STATSIG_API_KEY_STAGING"
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "statsig_api_key_staging"},
    {kind = "env", name = "STATSIG_API_KEY_STAGING"},
]

[[secrets]]
name = "local_jwt_key"
type = "env_var"
env_var_name = "LOCAL_JWT_KEY"
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "local_jwt_key"},
    {kind = "env", name = "LOCAL_JWT_KEY"},
]

[[secrets]]
name = "prod_jwt_key"
type = "env_var"
env_var_name = "PROD_JWT_KEY"
src = [
    {kind = "secrets_toml", path = "~/.config/applied-devbox/secrets.toml", key = "prod_jwt_key"},
    {kind = "env", name = "PROD_JWT_KEY"},
]
